{% extends "layout.html" %}
{% block content %}
    {% if test.test_type == 1 %}
        <h1>Your Generic Test Results</h1>
    {% elif test.test_type == 2 %}
        <h1>Your Contextual Test Results</h1>
    {% endif %}

    <h2>Genre you like:</h2>
    <div id="genrePreferences">
        <!-- Placeholder for dynamically generated genres -->
    </div>

    <!--
    <ul>
        <li> Rock: {{ genre_score['Rock'] }} </li>
        <li> Hip Hop: {{ genre_score['Hip Hop'] }} </li>
        <li> Pop Ballad: {{ genre_score['Pop Ballad'] }} </li>
        <li> Electronic: {{ genre_score['Electronic'] }} </li>
        <li> Korean Ballad: {{ genre_score['Korean Ballad'] }} </li>
        <li> Jazz: {{ genre_score['Jazz'] }} </li>
        <li> R&B/Soul: {{ genre_score['R&B/Soul'] }} </li>
    </ul>
    -->
    
    <h2>Mood you like:</h2>
    <div id="moodPreferences">
        <!-- Placeholder for dynamically generated moods -->
    </div>
    <!--
    <ul>
        <li> Angry: {{ mood_score['Angry'] }} </li>
        <li> Bright: {{ mood_score['Bright'] }} </li>
        <li> Melancholy: {{ mood_score['Melancholic'] }} </li>
        <li> Relaxed: {{ mood_score['Relaxed'] }} </li>
    </ul>
    -->

    <h2>Vocals you like:</h2>
    <div id="vocalPreferences">
        <!-- Placeholder for dynamically generated vocals -->
    </div>
    <!--
    <ul>
        <li> Clear: {{ vocal_score['Smooth'] }} </li>
        <li> Ethereal: {{ vocal_score['Dreamy'] }} </li>
        <li> Raspy: {{ vocal_score['Raspy'] }} </li>
        <li> Voiceless: {{ vocal_score['Voiceless'] }} </li>
    </ul>
    -->

    <div class="display-messages">
        {% for message in display_messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>

    <div class="attribute-values">
        <h2>Attribute Values</h2>
        {% for attribute, values in attribute_values.items() %}
            <p><strong>{{ attribute }}:</strong> {{ values }}</p>
        {% endfor %}
    </div>    

    <!-- Embedding genre, mood, and vocal scores as JavaScript variables -->
    <script type="text/javascript">
        var genreScores = JSON.parse('{{ genre_score | tojson | safe }}');
        var moodScores = JSON.parse('{{ mood_score | tojson | safe }}');
        var vocalScores = JSON.parse('{{ vocal_score | tojson | safe }}');

        document.addEventListener('DOMContentLoaded', function() {
            createPreferenceScales(genreScores, 'genrePreferences');
            createPreferenceScales(moodScores, 'moodPreferences');
            createPreferenceScales(vocalScores, 'vocalPreferences');
        });
    </script>

    <!-- Include JavaScript file -->
    <script src="../static/main.js"></script>
{% endblock content %}